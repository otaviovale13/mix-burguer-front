let Categorias = {
  Destaques: [
    {
      Nome: "COMBO FAMILIA",
      Descricao: "Aproveite este combo com dois hambúrgueres Classic e dois Mix, acompanhado de um refrigerante de 1,5 litros para completar sua refeição!Perfeito para compartilhar com amigos e família.",
      Preco: "R$ 80,00",
      Imagem: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR8ZzTc6D3nHxSlyt6PMJY6V_CHolPuGPfnXA&s",
    },
  ],
  Combo: [
    {
      Nome: "COMBO CASAL",
      Descricao: "2 hambúrguer top onion 200gramas de batata crocante 1 porção de anel de cebola e 2 coca cola lata",
      Preco: "R$ 68,00",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FLUGWlenr9ACZhRV86ec1_900x900.webp?alt=media&token=7b4acc66-64f5-4bd0-86d5-bb82b0350f38",
    },
    {
      Nome: "COMBO FAMILIA : 2 Classic + 2 Mix + 1 Refrigerante 1,5L",
      Descricao: "Aproveite este combo com dois hambúrgueres Classic e dois Mix, acompanhado de um refrigerante de 1,5 litros para completar sua refeição!Perfeito para compartilhar com amigos e família.",
      Preco: "R$ 80,00",
      Imagem: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR8ZzTc6D3nHxSlyt6PMJY6V_CHolPuGPfnXA&s",
    },
  ],
  "Hambúrguer Artesanal": [
    {
      Nome: "Mix",
      Descricao: "Nosso clássico e irresistível Mix: Carne smash suculenta, queijo derretido e maionese da casa exclusiva, tudo servido em um pão brioche macio. Uma combinação perfeita de simplicidade e sabor que agrada a todos os paladares.",
      Preco: "R$ 21,95",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FsQOGG266owKD412TDneW_900x900.webp?alt=media&token=0482d83c-d900-454a-b486-98abb3eae5f9",
    },
    {
      Nome: "Classic",
      Descricao: "Experimente o nosso Classic Burger: Carne smash suculenta, queijo derretido, alface americana fresca, tomate maduro, cebola roxa crocante e a nossa exclusiva maionese da casa, tudo isso servido em um pão brioche macio. Uma combinação clássica que nunca sai de moda, perfeita para qualquer ocasião na Mix Burguer.",
      Preco: "R$ 25,95",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2F6D3H0y7gvVbjla1lTWJ1_900x900.webp?alt=media&token=94da58c9-07f1-456e-8c9a-bb124c83e0ac",
    },
    {
      Nome: "Big Mix",
      Descricao: "Conheça o Big Mix Burger da Mix Burguer: Duas carnes smash suculentas, cada uma com duas camadas de queijo cheddar derretido, maionese da casa exclusiva, tudo servido em um pão brioche macio. Um hambúrguer generoso e delicioso, perfeito para quem busca uma experiência intensa de sabores e uma refeição completa.",
      Preco: "R$ 28,95",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FbYnIUB2Cw7aEeiwtEO0p_900x900.webp?alt=media&token=c5a55722-772b-4128-bca2-5c1a95f71b21",
    },
    {
      Nome: "Top Onion",
      Descricao: "Descubra o Top Onion Burger da Mix Burguer em Itupeva: Carne smash suculenta, queijo derretido, 3 anéis de cebola crocantes e um delicioso molho barbecue, tudo servido em um pão brioche macio. Uma explosão de sabores e texturas, perfeita para quem busca um hambúrguer único e saboroso.",
      Preco: "R$ 25,95",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2F0w161zPGbk2lA7IfyKdW_900x900.webp?alt=media&token=381d5c34-bdea-40f9-b12f-f34b9caf41fb",
    },
    {
      Nome: "Mega Burguer",
      Descricao: "Descubra o sabor incrível do nosso Mega Burger: Carne smash suculenta, queijo derretido, maionese da casa, ketchup e picles crocantes, tudo servido em um pão brioche macio. Uma explosão de sabores que combina suculência e frescor, perfeita para quem busca um hambúrguer delicioso e completo na Mix Burguer.",
      Preco: "R$ 26,95",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FcFpDEkvFSmZGAcYTrLEY_900x900.webp?alt=media&token=ff15655f-cecf-4be5-a60d-86ea5e50e043",
    },
    {
      Nome: "Fritas Burguer",
      Descricao: "Delicie-se com o Fritas Burger da Mix Burguer em Itupeva: Carne smash suculenta, queijo cheddar cremoso derretido e batata frita crinkle crocante, tudo servido em um pão brioche macio. Uma combinação inovadora que traz o melhor dos dois mundos – hambúrguer e batata frita – em uma única mordida deliciosa.",
      Preco: "R$ 27,95",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2F6D3H0y7gvVbjla1lTWJ1_900x900.webp?alt=media&token=94da58c9-07f1-456e-8c9a-bb124c83e0ac",
    },
    {
      Nome: "Tomato Burguer",
      Descricao: "Experimente o Tomato Burger da Mix Burguer em Itupeva: Carne smash suculenta, queijo derretido, cebola roxa fresca, molho especial e tomate seco, tudo servido em um pão brioche macio. Uma combinação única de sabores sofisticados e ingredientes frescos, proporcionando uma experiência gourmet inesquecível.",
      Preco: "R$ 22,95",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2F37AX7dFBJCpyfXw9W64y_900x900.webp?alt=media&token=8af0c510-d2e9-4b89-b039-2c3fa1ecde12",
    },
    {
      Nome: "Cheddar Melt",
      Descricao: "Experimente o irresistível Cheddar Melt Burger da Mix Burguer: Carne smash suculenta, queijo cheddar cremoso derretido, bacon crocante triturado, tudo servido em um pão brioche macio. Uma combinação perfeita de sabores intensos e texturas crocantes, garantindo uma experiência gourmet em cada mordida.",
      Preco: "R$ 27,95",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FjFbCG53TntgGhWWVicOA_900x900.webp?alt=media&token=2efa1118-741f-45cc-b264-20f7a0217922",
    },
    {
      Nome: "BBQ Burguer",
      Descricao: "Saboreie o BBQ Burger da Mix Burguer em Itupeva: Carne smash suculenta, cebola roxa fresca, tiras de bacon crocante e um delicioso molho barbecue, tudo servido em um pão brioche macio. Uma combinação perfeita de sabores defumados e suculência, ideal para os amantes de um bom hambúrguer barbecue.",
      Preco: "R$ 25,95",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2Fo0N5bICnlipyZmjfe2nE_900x900.webp?alt=media&token=61d27aed-0967-4a95-976a-69a493d69df3",
    },
    {
      Nome: "Mix Burguer",
      Descricao: "Experimente o clássico Mix Burger da Mix Burguer em Itupeva: Carne smash suculenta, queijo derretido, tiras de bacon crocante, alface americana fresca, tomate maduro e cebola roxa, tudo servido em um pão brioche macio. Uma combinação perfeita de ingredientes frescos e sabores intensos, proporcionando uma experiência única a cada mordida.",
      Preco: "R$ 28,95",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FRos3XIMvUqvhzXe02JOd_900x900.webp?alt=media&token=73c9b793-ca86-478e-b262-8dedd2acbcaa",
    },
    {
      Nome: "Supremo Burguer",
      Descricao: "Delicie-se com o Supremo Burger da Mix Burguer em Itupeva: Carne smash suculenta, queijo derretido, tiras de bacon crocante, cebola roxa fresca e nossa exclusiva maionese da casa, tudo servido em um pão brioche macio. Uma combinação irresistível de sabores e texturas que eleva sua experiência de hambúrguer a um novo nível.",
      Preco: "R$ 25,95",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FexT2W0Ki9bQkcFa2DZzA_900x900.webp?alt=media&token=b417c667-9d8b-4b3a-99ea-c6e558832722",
    },
  ],
  Porção: [
    {
      Nome: "Batata Frita",
      Descricao: "Grande ou pequena",
      Preco: "R$ 19,89",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FI0rkKYWmsDgmGZSBLkeu_900x900.webp?alt=media&token=087ce2ad-36e9-4e70-a154-24e42010595a",
    },
    {
      Nome: "Batata, Cheddar e Bacon",
      Descricao: "Grande",
      Preco: "R$ 55,00",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FXc9uksfEVB5B2mfyuWn8_900x900.webp?alt=media&token=24daa409-2e50-42dd-bc11-43cf6bd6fcf1",
    },
    {
      Nome: "Batata 500g",
      Descricao: "500g - Serve 3 pessoas",
      Preco: "R$ 23,00",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FI0rkKYWmsDgmGZSBLkeu_900x900.webp?alt=media&token=087ce2ad-36e9-4e70-a154-24e42010595a",
    },
  ],
  Bebidas: [
    {
      Nome: "Coca 220ml",
      Descricao: "Lata - Pequena",
      Preco: "R$ 5,00",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FZ7vJKOSTaLOJN39JkBKa_900x900.webp?alt=media&token=8204ecd4-c2ff-4be2-9be8-a5c040523bb0",
    },
    {
      Nome: "Água Mineral",
      Descricao: "Garrafa Plástica - Pequena",
      Preco: "R$ 3,00",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FfGm1p4Cb9stRluOIasxT_900x900.webp?alt=media&token=2854d15d-6885-4130-ba28-f9b00bd6fffa",
    },
  ],
  Sorvete: [
    {
      Nome: "Casquinha",
      Descricao: "Pequena - Não entregamos no Delivery",
      Preco: "R$ 4,00",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FfGm1p4Cb9stRluOIasxT_900x900.webp?alt=media&token=2854d15d-6885-4130-ba28-f9b00bd6fffa",
    },
    {
      Nome: "Cascão",
      Descricao: "Grande - Não entregamos no Delivery",
      Preco: "R$ 7,00",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FfGm1p4Cb9stRluOIasxT_900x900.webp?alt=media&token=2854d15d-6885-4130-ba28-f9b00bd6fffa",
    },
    {
      Nome: "Sundae",
      Descricao: "Pequeno - Não entregamos no Delivery",
      Preco: "R$ 7,00",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FfGm1p4Cb9stRluOIasxT_900x900.webp?alt=media&token=2854d15d-6885-4130-ba28-f9b00bd6fffa",
    },
    {
      Nome: "Top Sundae",
      Descricao: "Grande - Não entregamos no Delivery",
      Preco: "R$ 7,00",
      Imagem: "https://firebasestorage.googleapis.com/v0/b/brendi-app.appspot.com/o/public%2Fstores%2FliDYZPGpWDhaJHW0sWIk%2Fimages%2Fproducts%2Fresized%2FfGm1p4Cb9stRluOIasxT_900x900.webp?alt=media&token=2854d15d-6885-4130-ba28-f9b00bd6fffa",
    },
  ],
}

const carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
let estadoPopUp = null;

const Adicionais = [
  {
    Nome: "Batata",
    Preco: "R$ 8,90",
    Imagem: "IMGS/1738688942957-removebg.png",
  },
  {
    Nome: "Anel de Cebola",
    Preco: "R$ 11,90",
    Imagem: "IMGS/1738688943009-removebg.png",
  },
  {
    Nome: "Coca Cola",
    Preco: "R$ 5,00",
    Imagem: "https://res.cloudinary.com/piramides/image/upload/c_fill,h_564,w_395/v1/products/3716-coca-cola-lata-350ml-12un.20250131112806.png?_a=BAAAV6GX",
  },
]

const categorias = document.getElementById("categorias")

categorias.innerHTML = Object.keys(Categorias)
  .map(categoria => `
            <div class="categoria">
                <h1 class="tituloCate">${categoria}</h1>
                ${Categorias[categoria]
      .map(item => `
                            <div class="produtos" onclick="popUp('${item.Nome}', '${item.Descricao}', '${item.Preco}', '${item.Imagem}',)"> 
                                <div>
                                    <h2 class="itemTitulo">${item.Nome}</h2>
                                    <h3 class="descricao">${item.Descricao}</h3>
                                    <h2 class="preco">${item.Preco}</h2>
                                </div>
                                <div class="divImg">
                                    <img src="${item.Imagem}" />
                                </div>
                            </div>
                        `)
      .join("")}
            </div>
        `)
  .join("")

  function buscarLanche() {
    const inputBuscar = document.getElementById("inputBuscar").value.toLowerCase();
    const categorias = document.querySelectorAll(".categoria");
    const mensagem = document.getElementById("mensagem");
    let encontrouAlgumProduto = false;
  
    categorias.forEach(categoria => {
      const produtos = categoria.querySelectorAll(".produtos");
      let visibilidade = false;
  
      produtos.forEach(item => {
        if (item.textContent.toLowerCase().includes(inputBuscar)) {
          item.style.display = "";
          visibilidade = true;
          encontrouAlgumProduto = true;
        } else {
          item.style.display = "none";
        }
      });
  
      categoria.style.display = visibilidade ? "" : "none";
    });
  
    // Exibe a mensagem apenas se nenhum produto for encontrado
    mensagem.style.display = encontrouAlgumProduto ? "none" : "flex";
  }

  function popUp(nome, descricao, preco, imagem) {
    const popUps = document.querySelector(".popUps");
    popUps.innerHTML = "";
  
    const novaDiv = document.createElement("div");
    novaDiv.className = "popUp";
  
    novaDiv.innerHTML = `
        <div class="colunn-1">
          <h1 class="titulo">${nome}</h1>
          <img src="${imagem}" />
          <button onclick="addCarrinho('${nome}', '${descricao}', '${preco}', '${imagem}')">Adicionar ao Carrinho</button>
          <div id="carrinhoPopUp" class="carrinhoPopUp">
            <i class="bi bi-cart-fill"></i>
            <h2>Carrinho Atual:</h2>
            <h3 id="carrinhoDisplay">Seu Carrinho está Vazio!</h3>
          </div>
          <div id="carrinhoTotalPopUp" class="carrinhoPopUp">
            <h3>Total: R$ 0,00</h3>
          </div>
        </div>
        <div class="colunn-1">
          <h1 class="titulo">${preco}</h1>
          <p class="descricaoPopUp">${descricao}</p>
          <div id="escolhas" class="escolhas">
            <h2 id="tituloEscolhas">Tem certeza que deseja adicionar ao carrinho?</h2>
            <div id="botoes" class="botoes">
              <button id="btnConfirmacaoCarrinho" onclick="confirmacaoCarinho('${nome}', '${descricao}', '${preco}', '${imagem}')">Sim</button>
              <button id="btnRemocaoCarrinho" onclick="remocaoCarinho()">Não</button>
            </div>
          </div>
          <div id="adicionais" class="adicionais"></div>
          <button onclick="fecharBtn()">Sair</button>
        </div>
    `;
  
    popUps.appendChild(novaDiv);
    popUps.style.display = "flex";
  
    atualizarCarrinhoDisplay();
  }
  
  function addCarrinho(nome, descricao, preco, imagem) {
    const escolhas = document.getElementById("escolhas");
    escolhas.innerHTML = `
     <h2 id="tituloEscolhas">Tem certeza que deseja adicionar ao carrinho?</h2>
     <div id="botoes" class="botoes">
        <button id="btnConfirmacaoCarrinho" onclick="confirmacaoCarinho('${nome}', '${descricao}', '${preco}', '${imagem}')">Sim</button>
        <button id="btnRemocaoCarrinho" onclick="remocaoCarinho()">Não</button>
     </div>
    `;
    escolhas.style.display = "flex";
  }  

function remocaoCarinho() {
  const escolhas = document.getElementById("escolhas");
  escolhas.style.display = "none";
}

function confirmacaoCarinho(nome, descricao, preco, imagem) {
  const botoes = document.getElementById("botoes");
  const tituloEscolhas = document.getElementById("tituloEscolhas");
  const btnConfirmacaoCarrinho = document.getElementById("btnConfirmacaoCarrinho");
  const btnRemocaoCarrinho = document.getElementById("btnRemocaoCarrinho");

  tituloEscolhas.innerText = "Quantos deseja adicionar ao Carrinho?";

  if (btnConfirmacaoCarrinho) btnConfirmacaoCarrinho.remove();
  if (btnRemocaoCarrinho) btnRemocaoCarrinho.remove();

  const inputQuantidade = document.createElement("input");
  inputQuantidade.type = "number";
  inputQuantidade.placeholder = "0";
  inputQuantidade.id = "inputQuantidade";
  inputQuantidade.className = "inputQuantidade";
  inputQuantidade.min = "1";
  botoes.appendChild(inputQuantidade);

  const btnEnviarPopUp = document.createElement("button");
  btnEnviarPopUp.innerText = "Enviar";
  btnEnviarPopUp.id = "btnEnviarPopUp";
  botoes.appendChild(btnEnviarPopUp);

  btnEnviarPopUp.addEventListener("click", () => {
    const quantidade = parseInt(inputQuantidade.value);

    if (!quantidade || quantidade < 1) {
      const alerts = document.querySelector(".alerts");
      alerts.innerHTML = ""
      const alert = document.createElement("div");
      alert.className = "alert";
      alert.innerHTML = `
        <h1>Erro!</h1>
        <p>Você precisa adicionar pelo menos 1 item ao carrinho.</p>
        <button class="btnCardapio" onclick="esconder()">Ok</button>
      `
      alerts.appendChild(alert);
      alerts.style.display = "flex"
      return;
    }

    const carrinhoDisplay = document.getElementById("carrinhoDisplay");

    const produto = {
      Nome: nome,
      Preco: preco,
      Descricao: descricao,
      Imagem: imagem,
      Quantidade: quantidade,
      Adicionais: [],
    };

    carrinho.push(produto);
    localStorage.setItem("carrinho", JSON.stringify(carrinho));
    console.log("Carrinho atualizado:", carrinho);

    carrinhoDisplay.innerText = `${nome} - ${quantidade}x`;

    // Atualizar o valor do carrinho atual no popup
    atualizarCarrinhoDisplay();

    const carrinhoPopUp = document.getElementById("carrinhoPopUp");

    let total = parseFloat(preco.replace("R$", "").trim().replace(",", ".")) * quantidade;

    const valDisplay = document.createElement("h3");
    valDisplay.innerText = `Total: R$ ${total.toFixed(2).replace(".", ",")}`;
    

    tituloEscolhas.innerText = "Deseja adicionar Adicionais ao Carrinho?";

    inputQuantidade.remove();
    btnEnviarPopUp.remove();

    const btnAdicionaisSimPopUp = document.createElement("button");
    btnAdicionaisSimPopUp.innerText = "Sim";
    btnAdicionaisSimPopUp.id = "btnAdicionaisSimPopUp";
    botoes.appendChild(btnAdicionaisSimPopUp);

    btnAdicionaisSimPopUp.addEventListener("click", () => {
      escolhas.style.display = "none";

      const adicionais = document.querySelector(".adicionais");
      const adicionaisList = document.createElement("div");
      adicionaisList.className = "adicionaisList";
      adicionaisList.innerHTML = `
        <h2>Adicionais - (Escolha no Máximo 10)</h2>
        <div class="adicionaisOptions">
          ${Adicionais.map(adicional => `
            <div class="adicionalItem">
              <h3 class="tituloAdicional">${adicional.Nome}</h3>
              <img class="fotoAdicional" src="${adicional.Imagem}" alt="${adicional.Nome}" />
              <h3>${adicional.Preco}</h3>
              <input type="number" class="inputQuantidadeAdicional" value="0" min="0" max="10" data-nome="${adicional.Nome}" data-preco="${adicional.Preco}" />
            </div>
          `).join("")}
        </div>
        <button class="btnAdicionaisEnviarPopUp" id="btnAdicionaisEnviarPopUp">Enviar</button>
      `;

      adicionais.appendChild(adicionaisList);

      document.getElementById("btnAdicionaisEnviarPopUp").addEventListener("click", () => {
        adicionarAdicionais(produto);
      });
    });

    const btnAdicionaisNaoPopUp = document.createElement("button");
    btnAdicionaisNaoPopUp.innerText = "Não";
    btnAdicionaisNaoPopUp.id = "btnAdicionaisNaoPopUp";
    botoes.appendChild(btnAdicionaisNaoPopUp);

    btnAdicionaisNaoPopUp.addEventListener("click", () => {
      const alerts = document.querySelector(".alerts");
      alerts.innerHTML = "";
      
      const alert = document.createElement("div");
      alert.className = "alert";
      alert.innerHTML = `
          <h1>Carrinho Atualizado!</h1>
          <button class="btnCardapio" onclick="esconder()">Ok</button>
      `;
      alerts.appendChild(alert);
      alerts.style.display = "flex";
  
      // Obtendo a referência antes de escondê-lo
      const escolhas = document.getElementById("escolhas");
  
      // Escondendo antes de alterar o conteúdo
      escolhas.style.display = "none";
  
      // Substituindo o conteúdo corretamente
      setTimeout(() => {
          escolhas.innerHTML = `
              <h2 id="tituloEscolhas">Tem certeza que deseja adicionar ao carrinho?</h2>
              <div id="botoes" class="botoes">
                  <button id="btnConfirmacaoCarrinho" onclick="confirmacaoCarrinho('${nome}', '${descricao}', '${preco}', '${imagem}')">Sim</button>
                  <button id="btnRemocaoCarrinho" onclick="remocaoCarinho()">Não</button>
              </div>
          `;
      }); // Pequeno delay para evitar conflitos visuais
  });  

    salvarEstadoPopUp(nome, descricao, preco, imagem, quantidade);
  });
}

function esconder(){
  const alerts = document.querySelector(".alerts");
  alerts.style.display = "none"
}

function adicionarAdicionais(produto) {
  const inputsAdicionais = document.querySelectorAll(".inputQuantidadeAdicional");
  let adicionaisSelecionados = [];
  let totalAdicionais = 0;

  inputsAdicionais.forEach(input => {
    const quantidade = parseInt(input.value);
    if (quantidade > 0) {
      const precoAdicional = parseFloat(input.dataset.preco.replace("R$", "").trim().replace(",", ".")); 
      adicionaisSelecionados.push({
        Nome: input.dataset.nome,
        Preco: precoAdicional,
        Quantidade: quantidade,
      });

      totalAdicionais += precoAdicional * quantidade;
    }
  });

  // Verificar se o total de adicionais excede 10
  const totalQuantidadeAdicionais = adicionaisSelecionados.reduce((acc, adicional) => acc + adicional.Quantidade, 0);
  if (totalQuantidadeAdicionais > 10) {
    const alerts = document.querySelector(".alerts");
      alerts.innerHTML = ""
      const alert = document.createElement("div");
      alert.className = "alert";
      alert.innerHTML = `
        <h1>Erro!</h1>
        <p>Você só pode adicionar 10 adicionais no total!.</p>
        <button class="btnCardapio" onclick="esconder()">Ok</button>
      `
      alerts.appendChild(alert);
      alerts.style.display = "flex"
    return;
  }

  produto.Adicionais = adicionaisSelecionados;

  // Calcular o total final (lanche + adicionais)
  let precoLanche = parseFloat(produto.Preco.replace("R$", "").trim().replace(",", "."));
  let totalFinal = precoLanche * produto.Quantidade + totalAdicionais;

  // Atualizar a exibição do total
  const carrinhoTotalPopUp = document.getElementById("carrinhoTotalPopUp");
  carrinhoTotalPopUp.innerHTML = `<h3>Total: R$ ${totalFinal.toFixed(2).replace(".", ",")}</h3>`;

  // Exibir os adicionais no carrinho
  const carrinhoDisplay = document.getElementById("carrinhoDisplay");
  carrinhoDisplay.innerHTML = `${produto.Nome} - ${produto.Quantidade}x<br>`;
  produto.Adicionais.forEach(adicional => {
    carrinhoDisplay.innerHTML += `${adicional.Nome} - ${adicional.Quantidade}x<br>`;
  });

  console.log("Produto atualizado com adicionais:", produto);
  const alerts = document.querySelector(".alerts");
      alerts.innerHTML = ""
      const alert = document.createElement("div");
      alert.className = "alert";
      alert.innerHTML = `
        <h1>Adicionais adicionados ao Carrinho!</h1>
        <button class="btnCardapio" onclick="esconder()">Ok</button>
      `
      alerts.appendChild(alert);
      alerts.style.display = "flex"
  escolhas.style.display = "none";

  const adicionaisList = document.querySelector(".adicionaisList");
  adicionaisList.style.display = "none";

  // Atualizar o valor do carrinho atual no popup
  atualizarCarrinhoDisplay();

  salvarEstadoPopUp(produto.Nome, produto.Descricao, produto.Preco, produto.Imagem, produto.Quantidade, produto.Adicionais);
  localStorage.setItem("carrinho", JSON.stringify(carrinho));
}

function salvarEstadoPopUp(nome, descricao, preco, imagem, quantidade, adicionais = []) {
  estadoPopUp = { nome, descricao, preco, imagem, quantidade, adicionais };
}

function atualizarCarrinhoDisplay() {
  const carrinhoDisplay = document.getElementById("carrinhoDisplay");
  const carrinhoTotalPopUp = document.getElementById("carrinhoTotalPopUp");

  if (carrinho.length === 0) {
    carrinhoDisplay.innerText = "Seu Carrinho está Vazio!";
    carrinhoTotalPopUp.innerHTML = "<h3>Total: R$ 0,00</h3>";
    return;
  }

  let total = 0;
  carrinhoDisplay.innerHTML = "";

  carrinho.forEach(produto => {
    let totalProduto = parseFloat(produto.Preco.replace("R$", "").trim().replace(",", ".")) * produto.Quantidade;
    carrinhoDisplay.innerHTML += `${produto.Nome} - ${produto.Quantidade}x<br>`;
    produto.Adicionais.forEach(adicional => {
      totalProduto += adicional.Preco * adicional.Quantidade;
      carrinhoDisplay.innerHTML += `${adicional.Nome} - ${adicional.Quantidade}x<br>`;
    });
    total += totalProduto;
  });

  carrinhoTotalPopUp.innerHTML = `<h3>Total: R$ ${total.toFixed(2).replace(".", ",")}</h3>`;
}

function salvarCarrinho() {
  localStorage.setItem("carrinho", JSON.stringify(carrinho));
  window.location.href = "./carrinho.html";
}

function adicionarAdicional(button) {
  const quantidadeSpan = button.nextElementSibling.nextElementSibling;
  let quantidade = parseInt(quantidadeSpan.textContent);
  const totalAdicionais = calcularTotalAdicionais();

  if (totalAdicionais < 10) {
    quantidade++;
    quantidadeSpan.textContent = quantidade;
    const precoBase = document.querySelector(".preçoLanche p").textContent;
    calcularPrecoTotal(precoBase);
  } else {
    alert("Você só pode adicionar até 10 adicionais no total.");
  }
}

function removerAdicional(button) {
  const quantidadeSpan = button.nextElementSibling;
  let quantidade = parseInt(quantidadeSpan.textContent);
  if (quantidade > 0) {
    quantidade--;
    quantidadeSpan.textContent = quantidade;
    const precoBase = document.querySelector(".preçoLanche p").textContent;
    calcularPrecoTotal(precoBase);
  }
}

function calcularTotalAdicionais() {
  let total = 0;
  document.querySelectorAll(".adicionais .quantidade").forEach(span => {
    total += parseInt(span.textContent);
  });
  return total;
}
function fecharBtn() {
  const popUps = document.querySelector(".popUps");
  popUps.style.display = "none";
}

function voltarHome() {
  window.location.href = "./index.html"
}

function voltarPedido() {
  window.location.href = "./pedido.html"
}

function irSugestão() {
  window.location.href = "./sugestoes.html"
}

function AdicionarLanche(nome, preco, descricao, imagem) {
  let valorTotalFloat = parseFloat(preco.replace("R$", "").trim().replace(",", ".")) || 0;

  // Adiciona o valor dos adicionais selecionados
  const adicionaisSelecionados = [];
  document.querySelectorAll(".adicionais").forEach(adicionalDiv => {
    const quantidade = parseInt(adicionalDiv.querySelector(".quantidade").textContent);
    const adicionalNome = adicionalDiv.querySelector("p").textContent;
    const adicionalPreco = parseFloat(adicionalDiv.querySelector("button[data-preco]").dataset.preco.replace("R$", "").trim().replace(",", ".")) || 0;
    if (quantidade > 0) {
      valorTotalFloat += adicionalPreco * quantidade;
      adicionaisSelecionados.push({ Nome: adicionalNome, Preco: adicionalPreco, Quantidade: quantidade });
    }
  });

  const produto = {
    Nome: nome,
    Preco: `R$ ${valorTotalFloat.toFixed(2).replace(".", ",")}`,
    Descricao: descricao,
    Imagem: imagem,
    Adicionais: adicionaisSelecionados
  };
  carrinho.push(produto);
  localStorage.setItem("carrinho", JSON.stringify(carrinho));

  console.log("carrinho atualizado:", carrinho);

  // Exibir alerta informando que o produto foi adicionado ao carrinho
  alert(`${nome} foi adicionado ao carrinho.`);
}

function toggleAdicional(button) {
  button.classList.toggle("selected");
  const precoBase = document.querySelector(".preçoLanche p").textContent;
  calcularPrecoTotal(precoBase);
}

function calcularPrecoTotal(precoBase) {
  let valorTotalFloat = parseFloat(precoBase.replace("R$", "").trim().replace(",", ".")) || 0;

  // Adiciona o valor dos adicionais selecionados
  document.querySelectorAll(".adicionais").forEach(adicionalDiv => {
    const quantidade = parseInt(adicionalDiv.querySelector(".quantidade").textContent);
    const adicionalPreco = parseFloat(adicionalDiv.querySelector("button[data-preco]").dataset.preco.replace("R$", "").trim().replace(",", ".")) || 0;
    valorTotalFloat += adicionalPreco * quantidade;
  });

  // Formata corretamente como moeda brasileira
  document.getElementById("ValorTotal").textContent = `R$ ${valorTotalFloat.toFixed(2).replace(".", ",")}`;
}

function exibirItensDoCarrinho() {
  const carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
  let itensHTML = "";

  carrinho.forEach(item => {
    let adicionaisHTML = "";
    item.Adicionais.forEach(adicional => {
      adicionaisHTML += `
        <p>Adicional: ${adicional.Nome} - R$ ${adicional.Preco.toFixed(2).replace(".", ",")} (x${adicional.Quantidade})</p>
      `;
    });

    itensHTML += `
      <div class="itemCarrinho" data-preco="${parseFloat(item.Preco.replace("R$", "").replace(",", "."))}">
        <p>${item.Nome} - ${item.Preco}</p>
        ${adicionaisHTML}
      </div>
    `;
  });

  itensDoCarrinho.innerHTML = itensHTML;
  atualizarPrecoTotal();
}

function btnPerfil(){
  window.location.href = "./userpage.html"
}

function btnPerfilAdm(){
  window.location.href = "./admpage.html"
}

function btnSacola(){
  window.location.href = "./carrinho.html"
}